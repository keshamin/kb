<!doctype html><html lang=en-us dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Introduction to Model Deployment issue.">
<meta name=theme-color content="#FFFFFF">
<meta name=color-scheme content="light dark"><meta property="og:title" content="Deployment Stage">
<meta property="og:description" content="Introduction to Model Deployment issue.">
<meta property="og:type" content="article">
<meta property="og:url" content="/articles/mle/lifecycle/deployment/"><meta property="article:section" content="articles">
<meta property="article:published_time" content="2022-02-22T15:55:39+03:00">
<meta property="article:modified_time" content="2022-02-22T15:55:39+03:00">
<title>Deployment Stage | MinII KB</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.82c5dbd23447cee0b4c2aa3ed08ce0961faa40e1fa370eee4f8c9f02e0d46b5f.css>
<script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.f2e5928ea44859409d82544f2add8831960a87a07f5c649628dea2889278ad1b.js></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>MinII KB</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li>
<a href=/articles/mle/>Machine Learning Engineering</a>
<ul>
<li>
<a href=/articles/mle/lifecycle/>ML Project Lifecycle</a>
<ul>
<li>
<a href=/articles/mle/lifecycle/scoping/>Scoping Stage</a>
</li>
<li>
<a href=/articles/mle/lifecycle/data/>Data Stage</a>
</li>
<li>
<a href=/articles/mle/lifecycle/modeling/>Modeling Stage</a>
</li>
<li>
<a href=/articles/mle/lifecycle/deployment/ class=active>Deployment Stage</a>
</li>
</ul>
</li>
<li>
<a href=/articles/mle/ml_pipelines/>ML Pipelines</a>
</li>
<li>
<a href=/articles/mle/data/>Data</a>
</li>
<li>
<span>TensorFlow</span>
<ul>
<li>
<a href=/articles/mle/tensorflow/transform/>TensorFlow Transform</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Deployment Stage</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#key-challenges>Key Challenges</a></li>
<li><a href=#common-deployment-cases>Common Deployment Cases</a></li>
<li><a href=#deployment-modes>Deployment modes</a></li>
<li><a href=#degree-of-automation>Degree of Automation</a></li>
<li><a href=#monitoring>Monitoring</a>
<ul>
<li><a href=#examples-of-metrics>Examples of Metrics</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
</header>
<article class=markdown><h1 id=model-deployment>
Model Deployment
<a class=anchor href=#model-deployment>#</a>
</h1>
<h2 id=key-challenges>
Key Challenges
<a class=anchor href=#key-challenges>#</a>
</h2>
<div class="book-columns flex flex-wrap">
<div class="flex-even markdown-inner">
<h3 id=mlstatistics-issues>
ML/Statistics Issues
<a class=anchor href=#mlstatistics-issues>#</a>
</h3>
<ol>
<li>
<p><strong>Data Drift</strong>:
Input data evolved and a trained model does not interpret it properly anymore</p>
</li>
<li>
<p><strong>Concept Drift</strong>:
The &ldquo;rules&rdquo; of taking the decision evolved</p>
</li>
</ol>
</div>
<div class="flex-even markdown-inner">
<h3 id=software-engineering-issues>
Software Engineering Issues
<a class=anchor href=#software-engineering-issues>#</a>
</h3>
<ol>
<li>Realtime or Batch</li>
<li>Cloud or Edge</li>
<li>Resources Requirements</li>
<li>Latency/Throughput requirements</li>
<li>Logging</li>
<li>Security and Privacy</li>
</ol>
</div>
</div>
<h2 id=common-deployment-cases>
Common Deployment Cases
<a class=anchor href=#common-deployment-cases>#</a>
</h2>
<ol>
<li>New product</li>
<li>Automate/assist with manual task</li>
<li>Replace previous ML system</li>
</ol>
<h2 id=deployment-modes>
Deployment modes
<a class=anchor href=#deployment-modes>#</a>
</h2>
<ol>
<li>Shadow mode
<ul>
<li>ML system works in parallel with current solution (manual or previous automated system)</li>
<li>ML system&rsquo;s decisions are not taken into account at this point</li>
<li>Monitoring system compares results from both systems to estimate accuracy and probably collect more training data</li>
</ul>
</li>
<li>Canary deployment
<ul>
<li>ML system works in parallel with current solution</li>
<li>New system handles a small portion of traffic, e.g. 5%</li>
<li>If there&rsquo;s no degradation, the portion is gradually increased</li>
</ul>
</li>
<li>Blue/Green Deployment
<ul>
<li>ML system works in parallel with current solution</li>
<li>At some point a router in front of both systems switches all the traffic to the new system</li>
<li>In case of degradation, the rollback is easy</li>
</ul>
</li>
</ol>
<h2 id=degree-of-automation>
Degree of Automation
<a class=anchor href=#degree-of-automation>#</a>
</h2>
<script src=/mermaid.min.js></script>
<script>mermaid.initialize({flowchart:{useMaxWidth:!0},theme:"default"})</script>
<p class=mermaid>
flowchart LR
HO[/Human Only/]
SM[/Shadow Mode/]
AA[/AI Assistance/]
PA[/Partial Automation/]
FA[/Full Automation/]
HO---SM---AA---PA---FA
</p>
<p>&ldquo;Human in the loop&rdquo; deployments:</p>
<ul>
<li><strong>AI Assistance</strong>: ML System highlights interesting input, but the decision is still taken by human</li>
<li><strong>Partial Automation</strong>: the decisions are taken by the ML System, but if it is not sure,
it forwards the request to human. The approach if very useful to collect more training data
when the accuracy is not good enough.</li>
</ul>
<h2 id=monitoring>
Monitoring
<a class=anchor href=#monitoring>#</a>
</h2>
<p>To build a monitoring dashboard:</p>
<ul>
<li>Brainstorm the things that could go wrong</li>
<li>Define the metrics that would reflect these problems</li>
</ul>
<blockquote class="book-hint info">
It is OK to start with a big number of metrics and remove some of them as you understand which are not representative.
</blockquote>
<h3 id=examples-of-metrics>
Examples of Metrics
<a class=anchor href=#examples-of-metrics>#</a>
</h3>
<div class="book-columns flex flex-wrap">
<div class="flex-even markdown-inner">
<h4 id=software-metrics>
Software Metrics
<a class=anchor href=#software-metrics>#</a>
</h4>
<ul>
<li>Memory</li>
<li>Compute</li>
<li>Latency</li>
<li>Throughput</li>
<li>Server Load</li>
</ul>
</div>
<div class="flex-even markdown-inner">
<h4 id=input-metrics>
Input Metrics
<a class=anchor href=#input-metrics>#</a>
</h4>
<ul>
<li>Number of missing values</li>
<li>Avg input audio length/volume</li>
<li>Avg image brightness</li>
</ul>
</div>
<div class="flex-even markdown-inner">
<h4 id=output-metrics>
Output Metrics
<a class=anchor href=#output-metrics>#</a>
</h4>
<ul>
<li>Average output value</li>
<li>Number of NULLs in output</li>
<li>Number of times user retries the same request</li>
<li>Number of times user refuse to use the system</li>
</ul>
</div>
</div>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#key-challenges>Key Challenges</a></li>
<li><a href=#common-deployment-cases>Common Deployment Cases</a></li>
<li><a href=#deployment-modes>Deployment modes</a></li>
<li><a href=#degree-of-automation>Degree of Automation</a></li>
<li><a href=#monitoring>Monitoring</a>
<ul>
<li><a href=#examples-of-metrics>Examples of Metrics</a></li>
</ul>
</li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>